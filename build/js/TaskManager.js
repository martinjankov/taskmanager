!function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var o=function(){function t(e,n,a,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tasksList={},this.baseUrl="http://localhost:3000",this.tasksListUrl=this.baseUrl+"/tasks",this.tasksSaveUrl=this.baseUrl+"/tasks",this.tasksDeleteUrl=this.baseUrl+"/tasks/#id#",this.taskWrapper=e,this.listContainer=n,this.loader=a,this.modal=i,this.modal.querySelector(".close-modal").addEventListener("click",this.closeModal.bind(this)),this.modal.querySelector(".task-save").addEventListener("click",this.saveTask.bind(this)),this.taskWrapper.querySelector(".task-add").addEventListener("click",this.showModal.bind(this))}return i(t,[{key:"listTasks",value:function(){var t=this;return fetch(this.tasksListUrl,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.json().then(t.formatTasks.bind(t)).then(t.deleteEvent.bind(t)).then(t.updateEvent.bind(t))})}},{key:"saveTask",value:function(){var t=this,e=this.modal.querySelector('input[name="task_id"]').value,n="POST",a=this.tasksSaveUrl;""!==e&&(n="PUT",a+="/"+e);var i={title:this.modal.querySelector("#modal-task-title").value,description:this.modal.querySelector("#modal-task-description").value};fetch(a,{method:n,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then(function(e){"PUT"===n?e.json().then(t.addTaskItem.bind(t)).then(t.closeModal.bind(t)):e.json().then(t.addTaskItem.bind(t)).then(t.deleteEvent.bind(t)).then(t.updateEvent.bind(t)).then(t.closeModal.bind(t))})}},{key:"deleteTask",value:function(t){var e=this,n=this.tasksDeleteUrl.replace("#id#",t);fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(n){e.listContainer.querySelector("#item-"+t).remove()})}},{key:"formatTasks",value:function(t){if(t.length>0){var e=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.addTaskItem(s)}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}}this.loader.style.display="none"}},{key:"addTaskItem",value:function(t){if(this.tasksList[t.id]){var e=document.querySelector("#item-"+t.id);e.querySelector(".task-title").innerHTML=t.title,e.querySelector(".task-description").innerHTML=t.description}else{var n=t.id;this.tasksList[n]=t;var a='<li id="item-'+t.id+'" class="task-item">\n\t\t\t\t\t<div class="task-meta">\n\t\t\t\t\t\t<h3 class="task-title">'+t.title+'</h3>\t\n\t\t\t\t\t\t<p class="task-description">'+t.description+'</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="task-actions">\n\t\t\t\t\t\t<button type="button" data-id='+t.id+' class="task-update">Update</button>\n\t\t\t\t\t\t<button type="button" data-id='+t.id+' class="task-delete">Delete</button>\n\t\t\t\t\t</div>\n\t\t\t\t</li>';this.listContainer.innerHTML+=a}}},{key:"updateEvent",value:function(){var t=this;(document.querySelectorAll(".task-update")||[]).forEach(function(e){e.addEventListener("click",function(e){t.showModal(e.target.dataset.id)},!1)})}},{key:"deleteEvent",value:function(){var t=this;(document.querySelectorAll(".task-delete")||[]).forEach(function(e){e.addEventListener("click",function(e){if(!confirm("Sure u want to delete?"))return e.preventDefault(),!1;t.deleteTask(e.target.dataset.id)})})}},{key:"showModal",value:function(t){if(this.modal.style.display="block","object"!==(void 0===t?"undefined":a(t))){var e=this.tasksList[t];this.modal.querySelector('input[name="task_id"]').value=t,this.modal.querySelector("h3").innerHTML="Update Task",this.modal.querySelector("button.task-save").text="Update Task",this.modal.querySelector("#modal-task-title").value=e.title,this.modal.querySelector("#modal-task-description").value=e.description}}},{key:"closeModal",value:function(){this.modal.style.display="none",this.modal.querySelector("h3").innerHTML="Add New Task",this.modal.querySelector("button.task-save").text="",this.modal.querySelector("#modal-task-title").value="",this.modal.querySelector("#modal-task-description").value=""}}]),t}();t.exports=o}]);
//# sourceMappingURL=TaskManager.js.map